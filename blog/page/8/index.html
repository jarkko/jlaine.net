
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <script type="text/javascript" src="//use.typekit.net/wpe2bbi.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  <meta charset="utf-8">
  <title>jlaine.net</title>
  <meta name="author" content="Jarkko Laine">

  
  <meta name="description" content="Rails Revelations: How Rails made me a better programmer
For me, the spell of Rails comes roughly in three parts: Productivity boost Having more fun &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jlaine.net/blog/page/8/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/feed/atom.xml" rel="alternate" title="jlaine.net" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link rel="author" href="//plus.google.com/117033765270760829494/">
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-84654-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">jlaine.net</a></h1>
  
</hgroup>

</header>
  <!--<nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/feed/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jlaine.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>-->
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/01/02/apress-blogging-contest-on-ruby/">Apress Blogging Contest @ on Ruby</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-01-02T00:00:00+02:00" pubdate data-updated="true">Jan 2<span>nd</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Rails Revelations: How Rails made me a better programmer</h2>
<p>For me, the spell of Rails comes roughly in three parts:</p>
<ol>
	<li>Productivity boost</li>
	<li>Having more fun</li>
	<li>Doing the right things</li>
</ol>
<p>Number 1 has been the reason numero uno almost everywhere Rails has been mentioned. I guess it&#8217;s easier to sell productivity to managers than having fun (&#8220;oh, that&#8217;s so unprofessional!&#8221;) or doing the right things without rigid explicit processes. However, I see the increased productivity mostly as an inevitable consequence of the two latter points.</p>
<p>Much of my liking Ruby and Rails development more than other environments comes from the feeling of the language and tools being a natural extension of my brain. Why shouldn&#8217;t I be able to write something like <code>2.weeks.ago</code>? It&#8217;s easy to dismiss things like that as just syntactic sugar without real meaning, but you know, things add up, and overall happiness in work is built of small details.</p>
<p>Point number three could be described as the dullest and most minor benefit Rails brings to table. However, in many ways it&#8217;s the grounding factor of both the happy Rails development and the improved productivity.</p>
<p>The things I include in doing the right things are stuff like making testing as easy as not to, conforming to the Rest principles and naming conventions, the <span class="caps">MVC</span>-type separation of concerns, and keeping yourself <acronym title="don&#39;t repeat yourself"><span class="caps">DRY</span></acronym>. I sleep my nights much better when I know that my application has extensive test coverage and that anyone knowledgeable with Rails can take it up in a few hours in case we need more labour force because the structure of the application is so obvious.</p>
<p>Now, none of these things are specific to or even popularized by Rails. However, many web developers have come to learn these lessons through Rails and I don&#8217;t know any other framework that would make them as integrated part of the development process as Rails does. As the king of the Rails kingdom, David Heinemeier Hansson, has said, Rails tries to be the angel on the developer&#8217;s shoulder (&#8220;Write your tests, it&#8217;s as easy as not to!&#8221;) as opposed to the <span class="caps">PHP</span> devil (&#8220;<span class="caps">SQL</span> in the views, quick&#8217;n&#8217;dirty, man!&#8221;).</p>
<p>However, my imagination is very limited and I&#8217;d like to hear more about what healthy habits Rails has made people learn and what bad habits to abandon. That&#8217;s why the topic of our January blogging contest is &#8220;Rails Revelations: How Rails made me a better programmer&#8221;. Heck, if Rails made you quit smoking, <a href="http://on-ruby.blogspot.com/2007/01/win-books-by-blogging.html">tell us about it</a>.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/12/20/welcome-cairo/">Welcome Cairo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-12-20T00:00:00+02:00" pubdate data-updated="true">Dec 20<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I just upgraded my <a href="http://www.caminobrowser.org/">browser of choice</a> to the <a href="http://ftp.mozilla.org/pub/mozilla.org/camino/nightly/latest-trunk/">latest nightly build</a>. Camino 1.0.3 has been anything but stable recently so I wondered the latest bugfixes can hardly make it worse. I got the spark from <a href="http://www.hicksdesign.co.uk">Mr. Hicks</a> who had a <a href="http://www.hicksdesign.co.uk/journal/cairo-beats-safari">comparison</a> between how the new <a href="http://en.wikipedia.org/wiki/Cairo_%28graphics%29">Cairo rendering engine</a>, Safari and the old Camino render light text on a dark background.</p>
<p>Of course, it will come with some other new goodies, too, like (finally) a <span class="caps">RSS</span> feed icon in the address bar, <a href="http://www.actsofvolition.com/archives/2006/december/cairocornersin">nice rounded corners</a> and automatic spell checking in forms.</p>
<p>So far the build of December 19 has been rock-solid (for a whopping hour ;-), so no complaints. And the new text rendering <strong>is</strong> nice.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/12/07/microsoft-provides-free-ie6-virtual-machine-for-web-developers/">Microsoft Provides Free IE6 Virtual Machine for Web Developers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-12-07T00:00:00+02:00" pubdate data-updated="true">Dec 7<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When developing <a href="http://dotherightthing.com">dotherightthing.com</a>, it&#8217;s been a real <span class="caps">PITA</span> to develop for Internet Explorer. I&#8217;m working on a Mac and have to do the Windows testing on the _gf_&#8217;s laptop. After I installed IE7 on the box, there was no easy way to run version 6 on it anymore. However, IE6 and IE7 both have their quirks which are, of course, completely different from one another.  As sad as it might be, IE6 is still the most popular browser on the market, so the situation was untenable.</p>
<p>I tried to use a standalone IE6 from the <a href="http://browsers.evolt.org/">Browser Archive</a>, but unfortunately I couldn&#8217;t even login to our dev system using it. It seems that it really isn&#8217;t that standalone and gets the cookies somehow mixed up (or doesn&#8217;t accept them at all, dunno), so the value of it was practically zero.</p>
<p>Luckily, for once something really useful from the MS land: <a href="http://blogs.msdn.com/ie/archive/2006/11/30/ie6-and-ie7-running-on-a-single-machine.aspx">IE6 and IE7 Running on a Single Machine</a>: free Virtual PC 2004 + a virtual machine for testing on IE6. Haven&#8217;t yet tested it but it sounds cool enough for small teams that don&#8217;t want to spend on Parallels + a Windows license or another Windows machine just for debugging the IE6 hell.</p>
<p>(via <a href="http://assemblix.net/">Assemblix</a>)</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/11/08/companion-site-for-the-book/">Companion Site for the Book</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-11-08T00:00:00+02:00" pubdate data-updated="true">Nov 8<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I set up a companion site for the book at <a href="http://www.railsecommerce.com">railsecommerce.com</a>. If you can&#8217;t access it yet (it&#8217;s still traveling around the <span class="caps">DNS</span> servers of the world), it can also be found at <a href="http://jlaine.net:8010">jlaine.net:8010</a>.</p>
<p>The site already has the sample code for the book, and will also sport the errata and a few sample chapters as soon as I get the system up and running. We will also be writing articles about all things related to Rails and E-Commerce on the site.</p>
<p>Check the site out and don&#8217;t forget to subscribe to the Atom feed!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/11/08/beginning-ruby-on-rails-e-commerce-is-shipping/">Beginning Ruby on Rails E-Commerce Is Shipping!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-11-08T00:00:00+02:00" pubdate data-updated="true">Nov 8<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Dear Rails Enthusiast,</p>
<p>We just got email from our editor Keir where he said he&#8217;d got his <br />
hands on our new book, Beginning Rails E-Commerce. His mail didn&#8217;t<br />
include the words &#8220;<a href="http://headrush.typepad.com/creating_passionate_users/2006/11/two_simple_word.html">f*cking awesome</a>&#8221;, but instead &#8220;superb&#8221; and<br />
&#8220;a work of art&#8221;, which we think are almost as good.</p>
<p>This means that the book will hit the shelves before you can say<br />
&#8220;Heinemeier&#8221;, so be sure to get yours while it&#8217;s still hot.</p>
<p>We wanted to make our book such that you can &#8220;read&#8221; it while you&#8217;re<br />
sitting in front of your computer. It&#8217;s completely project-driven,<br />
meaning the content is divided by task, and that you can build<br />
the sample application in small iterations, learning the<br />
background details on the fly.</p>
<p>As one of the core philosophies of Rails is to support best<br />
practices, we decided to do that as well. Most of the tasks are<br />
written test-driven, giving you a glimpse of the ease with which<br />
<span class="caps">TDD</span> can be used in Rails and the power it brings compared to a<br />
traditional, ad-hoc web application development process.</p>
<p>We hope you enjoy the book as much as we enjoyed the journey of<br />
writing it.</p>
<p>Buy the book</p>
<ul>
	<li><a href="http://www.apress.com/book/bookDisplay.html?bID=10178">Directly from Apress</a></li>
	<li>or <a href="http://www.amazon.com/Beginning-Ruby-Rails-E-Commerce-Professional/dp/1590597362/">from Amazon.com</a></li>
</ul>
<p>Best,</p>
<p>Christian Hellsten and Jarkko Laine</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/10/26/spam-statistics/">Spam Statistics</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-10-26T00:00:00+03:00" pubdate data-updated="true">Oct 26<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h4>Filtered Mail</h4>
<p>84040 Good Messages</p>
<p>19581 Spam Messages (19%)</p>
<p>19 Spam Messages Per Day</p>
<h4>SpamSieve Accuracy</h4>
<p>91 False Positives</p>
<p>162 False Negatives (64%)</p>
<p>99.8% Correct</p>
<h4>Corpus</h4>
<p>2286 Good Messages</p>
<p>2485 Spam Messages (52%)</p>
<p>167105 Total Words</p>
<h4>Rules</h4>
<p>1460 Blocklist Rules</p>
<p>2529 Whitelist Rules</p>
<h4>Showing Statistics Since</h4>
<p>30.1.2004 18.11.26</p>
<p><a href="http://c-command.com/spamsieve/">SpamSieve</a> rocks. I just wish it would have some kind of connection to the server so that the screening could do already on that level. That way the spam butchering wouldn&#8217;t depend on me reading my mail through Mail.app.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/10/24/my-rails-presentation-at-openmind-2006/">My Rails Presentation at Openmind 2006</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-10-24T00:00:00+03:00" pubdate data-updated="true">Oct 24<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m here today to talk about Ruby on Rails. I&#8217;m sure many of you have heard about Rails before, but for those who haven&#8217;t, Rails is a full-stack Model-View-Controller web application framework suitable for rapid application development, meaning it includes everything from an object-relational mapping layer called ActiveRecord to ActionController to ActionView.</p>
<p>I&#8217;m not going to give you a full introduction to Rails, since the time doesn&#8217;t permit that. Instead, I&#8217;m going to frame this talk by telling why Rails is reaching its tipping point.</p>
<p>The Tipping Point is a best seller book by Malcolm Gladwell. It gives an interesting explanation of why change so often happens as quickly and as unexpectedly as it does. Not following a straight line but a hockey stick curve like this example depicting the success rate of podcasting shows. The point where a steady and slow trend abruptly skyrockets (or plummets) is called <em>the tipping point</em>.</p>
<p>For example, why did crime drop so dramatically in New York City in the mid-1990&#8217;s? And why word-of-mouth is so powerful? If you haven&#8217;t read the book, I strongly recommend it. You know, Santa Claus is coming and everything&#8230;</p>
<p>Gladwell presents three things that must be in order for any phenomenon to reach its tipping point:</p>
<ol>
	<li>The law of the few</li>
	<li>Context</li>
	<li>Stickiness</li>
</ol>
<p>If any of these three (which we&#8217;ll go into in detail in a minute) is lacking, it&#8217;s hard or impossible to reach the tipping point.</p>
<p>Presenting Rails in this context is by no means an original idea, actually I got the idea from a blog post by David Geary, who is &#8211; a bit ironically &#8211; a Java guru (author of Graphic Java and Core <span class="caps">JSF</span>) turned into a Rails addict.</p>
<h2>The Law of the Few</h2>
<p>In the end, every success story is about people. And not just any people but the right kind of people.</p>
<p>According to Gladwell, to be successful, any phenomenon needs three kinds of people: salesmen, connectors and mavens.</p>
<h3>Salesmen</h3>
<p>Salesmen are the kind of people that can sell you a whole kitchen when you were just going to buy a new coffeemaker.</p>
<p>The creator of Rails, David Heinemeier Hansson, is a natural-born salesman. Not only does he look like a Gant model, he&#8217;s a mesmerizing talker, always being genuinely excited about all the stuff he&#8217;s talking about. He&#8217;s also not afraid to poke the beehive to create the needed buzz. Some people think he&#8217;s arrogant, but he&#8217;s just very true to himself doing his own, great, admittedly opinionated stuff. And&#8230; as Don Norman puts it: &#8220;If someone doesn&#8217;t really hate your product, it&#8217;s mediocre.&#8221; You don&#8217;t wanna be mediocre if you want to tip.</p>
<p>But it&#8217;s not enough to have a salesman like <span class="caps">DHH</span> to spread the word. There are two other kinds of needed people, too. In the case of Rails, the two are often combined in the same people but the needed characteristics are quite a bit different.</p>
<h3>Mavens</h3>
<p>Mavens are people that love to acquire knowledge about different topics and to share that information with others. They&#8217;re the people that have more than a thousand subscriptions in their feed readers. For Rails, quite a bunch of high profile mavens got excited about Rails early on and let the world know about it. Tim O&#8217;Reilly probably doesn&#8217;t need an introduction, and neither does Dave Thomas. James Duncan Davidson, the creator of Ant and formerly part of the Java team at Sun, is now a hard core Rails guy. Mike Clark, Jason Hunter, Bruce Tate, Dion Almaer, Stuart Holloway, Justin Gehtland, Glenn Vanderburg, and the aforementioned David Geary are all some of the biggest Rails evangelists now. You wouldn&#8217;t think that seeing the books they&#8217;ve written previously.</p>
<h3>Connectors</h3>
<p>The last group of people crucial for the success of a product is connectors. They are the hubs of word-of-mouth epidemics, the people that know &#8220;everybody&#8221;. I myself have 47 connections in LinkedIn, which I think is ok, the average for people I know is more like 20. The conference chair at O&#8217;Reilly, Nat Torkington, has 325 connections. He&#8217;s the kind of connector that is crucial for spreading the Rails virus.</p>
<h2>Context</h2>
<p>Whether there are the right people advocating the cause, a product like Rails just can&#8217;t tip if the context is wrong. The context strongly affects how people react to different stimuli. The Tipping Point describes a study where researchers at the Princeton University told seminary students to prepare a short talk about a given topic and go present it in a nearby building. Between the two buildings there was a man who was obviously in agony and in the need of help. The purpose of the study was to see who would stop and help.</p>
<p>Some people were given the good samaritan as the topic, others got some random topics.</p>
<p>After the talk was ready, the instructor said to some students that they&#8217;re already late and that they should hurry up. To others, they said that they still have some time but that they can as well head over now.</p>
<p>It turned out only 10 percent of those who were said being in a hurry stopped and helped the guy, as opposed to 63 percent of the students who had plenty of time. It didn&#8217;t make any difference whatsoever what the topic of the speech or the background of the student was. Indeed, many students rushing to give a talk about the good samaritan actually stepped over the fellow in agony.</p>
<p><em>That&#8217;s the power of context.</em></p>
<p>For Rails, the context we&#8217;re currently in is very favourable. As David Geary puts it, &#8220;Java was once developed as a simple alternative to overly-complex C++. But that was ten years ago. Now enterprise Java has grown into a behemoth that consists of layer upon layer of complexity.&#8221; This is a comparison of the amount of books needed to grasp the same amount of stuff you need with Rails in Java. As Jason Hunter puts it, &#8220;Java has opened the door for simpler alternatives.&#8221; And of these, Rails is certainly one of the strongest contenders.</p>
<p>If we approach the thing from another direction, <span class="caps">PHP</span>, the situation is also getting ripe for change. <span class="caps">PHP</span> is cool for simple hacks but a really bad match for anything that needs to be better structured and maintained. Flat namespace, anyone? However, the rigid Java frameworks just don&#8217;t cut it for the most of the disgruntled <span class="caps">PHP</span> hackers, so Rails is in a really good position even in this context.</p>
<h2>Stickiness</h2>
<p>And now for the part that talks about the Rails itself.</p>
<p>Good, so Rails has some marvelous people advocating it, and the time seems to be right for it. But it&#8217;s all for naught if the message doesn&#8217;t stick with the listener. It&#8217;s not enough to have the perfect salesmen and context for a product to really tip. People have tried that: to use a huge amount of marketing effort to sell something which doesn&#8217;t really have any content. It&#8217;s called a bubble.</p>
<p>So what&#8217;s making Rails stick? I think the most important thing in life&#8230; errr&#8230; stickyness, is love. Love, passion and happiness are what really drive people forward. And they are what Ruby and Rails are optimized for. Not sucking each and every cycle of the cpu to make the code run faster, but making the programmer happy, passionate, and thus more productive. Don&#8217;t know about you but I would be happy to shell out a few bucks for a faster server if that would make my programmers happier and more productive.</p>
<p>Currently, there are many people that are working on some &#8220;enterprisy&#8221; platform in their day job and then learning Rails by night. A month later they&#8217;re starting their own moonlighting companies, earning money by doing the stuff they love and are passionate about. If I would be a <span class="caps">CTO</span> at their day job, I would pay really close attention to this trend.</p>
<p>Most people hesitant about Rails are that only until they really use it. After that, most of them are hooked. Not everybody, Rails is opinionated and not for everyone, but more important than the amount of hooked people is the level of passion they feel about Rails.</p>
<p>So what is it in Rails that makes it stick with the hackers?</p>
<p>One thing that appeals to many hackers is the beauty of the Rails code (which is mostly thanks to Ruby). Actually the reason for <span class="caps">DHH</span> to write Rails on Ruby was because he &#8220;was unable to write beautiful code in <span class="caps">PHP</span>&#8221; :</p>
<filter:jscode lang="ruby">User.find_by_name(&#8220;jarkko&#8221;).posts<br />
<br />
class User<br />
  has_many :posts<br />
  validates_presence_of :email<br />
end</filter:jscode>
<p>That&#8217;s all very clean and should be understandable even for people never heard about Ruby or Rails.</p>
<p>Another, related principle in Rails is <em>convention over configuration</em>:</p>
<filter:jscode lang="ruby">class User<br />
  set_table_name &#8220;users&#8221;<br />
  primary_key &#8220;id&#8221;<br />
  <br />
  has_many :posts, :class_name =&gt; &#8220;Post&#8221;<br />
  belongs_to :group, :class_name =&gt; &#8220;Group&#8221;, :foreign_key =&gt; &#8220;group_id&#8221;<br />
end</filter:jscode>
<p>This is all fine and good. You can specify everything in detail just like you did before with framework X (except that you don&#8217;t need to do the <span class="caps">XML</span> situps). But imagine for a while it could be even easier. Imagine, what if it could look like this:</p>
<filter:jscode lang="ruby">class User  <br />
  has_many :posts<br />
  belongs_to :group<br />
end</filter:jscode>
<p>With Rails, it does, as long as we adhere to the common Rails conventions (which would be sane for a greenfield application anyway). Why make everything equally hard and ugly, when we can make the thing much more fun for the most of the users, for the most of the time? But like you could see from the previous slide, you don&#8217;t <em>have</em> to follow all the standards, you&#8217;re just strongly encouraged to do so.</p>
<h3>Killer <span class="caps">AJAX</span> support</h3>
<p>Rails core team is the home of the creators of two of the most prominent <span class="caps">AJAX</span> frameworks: Prototype and script.aculo.us. It has built in support and helpers to create Ajax calls and responses as easy as not to, without necessarily writing a line of actual Javascript.</p>
<h3>The Ruby itself</h3>
<ul>
	<li>Dynamic Typing</li>
	<li>Reads out beautifully</li>
	<li>Introspection</li>
	<li>Open classes</li>
	<li>Execute code in class definitions</li>
</ul>
<p>In a word, Ruby just rocks. It&#8217;s the bread and butter. If you haven&#8217;t try it out.</p>
<p>It&#8217;s all that stuff (and a lot more) that makes Rails so great, and sticky. But don&#8217;t just take my word for it. Go ahead and test it yourself. There&#8217;s prebuilt packages for both OS X and Windows you can just install with one click and start using it. The web is full of tutorials on getting started. There&#8217;s also a couple of books published about Ruby and Rails. You can find them easily from amazon.com. One of them is especially close to my heart (because I wrote it): a <a href="http://www.amazon.com/Beginning-Ruby-Rails-E-Commerce-Professional/dp/1590597362/">shameless plug for our book that just went into print</a>.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/10/03/resetting-activerecord-object-columns-in-migrations/">Resetting ActiveRecord Object Columns in Migrations</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-10-03T00:00:00+03:00" pubdate data-updated="true">Oct 3<span>rd</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Often when you use migrations to keep track of your database schema, you also need to migrate data around in the database. You can use the <code>execute</code> method to do this in pure <span class="caps">SQL</span>, but since migrations are Ruby code and have access to all the ActiveRecord code, why not do it in there? Here&#8217;s an example from our latest project where I reverse a has_one&#8212;belongs_to association:</p>
<filter:jscode lang="ruby">  def self.up<br />
    add_column :images, :content_id, :integer<br />
<br />
    Content.find(:all, :conditions =&gt; &#8220;image_id is not null&#8221;).each do |entry|<br />
      image = Image.find_by_id(entry.image_id) rescue nil<br />
      if image<br />
        image.content_id = entry.id<br />
        image.save<br />
      end<br />
    end<br />
<br />
    remove_column :contents, :image_id<br />
  end</filter:jscode>
<p>However, this has one problem. The Image class is loaded and the column information cached before the column <code>content_id</code> is added, so it doesn&#8217;t have the getter and setter methods for that column and thus <code>image.content_id = entry.id</code> will bomb.</p>
<p>Fortunately this is easy enough to fix. Just call <code>Classname.reset_column_information</code> after the column is added, and the new column will be found:</p>
<filter:jscode lang="ruby">  def self.up<br />
    add_column :images, :content_id, :integer<br />
<br />
    Image.reset_column_information<br />
    Content.find(:all, :conditions =&gt; &#8220;image_id is not null&#8221;).each do |entry|<br />
      image = Image.find_by_id(entry.image_id) rescue nil<br />
      if image<br />
        image.content_id = entry.id<br />
        image.save<br />
      end<br />
    end<br />
<br />
    remove_column :contents, :image_id<br />
  end</filter:jscode></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/10/03/installing-ruby-mysql-driver-on-os-x/">Installing Ruby MySQL Driver on OS X</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-10-03T00:00:00+03:00" pubdate data-updated="true">Oct 3<span>rd</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Just noticed that I hadn&#8217;t installed the native Ruby mysql driver after getting the laptop back from repair. The reason it took a few days is that Rails just happily churns away with it&#8217;s built-in pure-ruby driver. However, the native binary driver is considerably faster and more stable, so you should never go into production without it. It won&#8217;t hurt having it installed on all your dev boxes, too.</p>
<p>However, installing the native driver on OS X wasn&#8217;t as easy as one would assume. If you have the MySQL binary OS X version from <a href="http://www.mysql.com">MySQL.com</a>, it&#8217;s installed under /usr/local/mysql, and the gem can&#8217;t find it there. You can fix this by hinting the gem install command about the location of MySQL:</p>
<filter:code>sudo gem install mysql &#8212; &#8212;with-mysql-dir=/usr/local/mysql</filter:code>
<p>Unfortunately, this resulted in errors:</p>
<filter:code>Probutanol:~ jarkko$ sudo gem install mysql &#8212; &#8212;with-mysql-dir=/usr/local/mysql/ <br />
Attempting local installation of &#8216;mysql&#8217;<br />
Local gem file not found: mysql*.gem<br />
Attempting remote installation of &#8216;mysql&#8217;<br />
Select which gem to install for your platform (i686-darwin8.6.1)<br />
 1. mysql 2.7.1 (mswin32)<br />
 2. mysql 2.7 (ruby)<br />
 3. mysql 2.6 (ruby)<br />
 4. mysql 2.5.1 (ruby)<br />
 5. Cancel installation<br />
&gt; 2<br />
Building native extensions.  This could take a while&#8230;<br />
mysql.c: In function Ã¢Init_mysqlÃ¢:<br />
mysql.c:2015: error: Ã¢ulongÃ¢ undeclared (first use in this function)<br />
mysql.c:2015: error: (Each undeclared identifier is reported only once<br />
mysql.c:2015: error: for each function it appears in.)<br />
mysql.c:2015: error: parse error before numeric constant<br />
mysql.c:2018: error: parse error before numeric constant</filter:code>
<p>Googling around helped, and <a href="http://i.nfectio.us/articles/2006/09/12/running-rails-on-os-x-with-mysql-5-0-24">Bob Silva came to the rescue</a>: you can fix the errors by adding the following line to the mysql.c file of the mysql gem (/opt/local/lib/ruby/gems/1.8/gems/mysql-2.7/mysql.c for me):</p>
<filter:code>#define ulong unsigned long</filter:code>
<p>However, just adding it and re-running the gem install command doesn&#8217;t work. It turns out the mysql.c file is recreated by the extconf.rb configuration, so you need to do a bit of handiwork:</p>
<filter:code>cd /opt/local/lib/ruby/gems/1.8/gems/mysql-2.7<br />
sudo ruby extconf.rb install mysql &#8212; &#8212;with-mysql-dir=/usr/local/mysql/</filter:code>
<p>Now add the line above to the created mysql.c file, and after that compile and install the driver by hand:</p>
<filter:code>sudo make<br />
sudo make install</filter:code>
<p>That&#8217;s it, the driver should be installed. You can check it by running the gem list command:</p>
<filter:code>$ gem list<br />
<br />
<b>* <span class="caps">LOCAL</span> <span class="caps">GEMS</span> *</b><br />
<br />
&#8230;<br />
<br />
mysql (2.7)<br />
    MySQL/Ruby provides the same functions for Ruby programs that the<br />
    MySQL C <span class="caps">API</span> provides for C programs.<br />
<br />
&#8230;</filter:code>
<p>Note that you might have the native driver installed even if you don&#8217;t have the gem (e.g. via darwinports). You can check whether the library is installed in irb:</p>
<filter:code>$ irb<br />
irb(main):001:0&gt; require &#8216;mysql&#8217;<br />
=&gt; true</filter:code>
<p>If it&#8217;s not installed, you will get something like this:</p>
<filter:code>$ irb <br />
irb(main):001:0&gt; require &#8216;rubygems&#8217;<br />
=&gt; true<br />
irb(main):002:0&gt; require &#8216;mysql&#8217;<br />
LoadError: no such file to load &#8212; mysql<br />
        from /opt/local/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:21:in `require__&#8217;<br />
        from /opt/local/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:21:in `require&#8217;<br />
        from (irb):2</filter:code></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/30/installing-subversion-1-4-on-os-x/">Installing Subversion 1.4 on OS X</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-09-30T00:00:00+03:00" pubdate data-updated="true">Sep 30<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong><span class="caps">UPDATE</span>, 1.11.2006</strong> I updated the script to build neon (and thus subversion) with <span class="caps">SSL</span> support.</p>
<p>I just got my MacBook Pro back from a repair where its faulty hard drive was replaced. All the data was migrated but the system folder was for some reason rebuilt so I lost the installed Developer Tools, and along with that, subversion.</p>
<p>I installed the latest Developer Tools from <a href="http://developer.apple.com">developer.apple.com</a>, but for some reason they don&#8217;t include subversion anymore. My next attempt was to install subversion from darwinports, but that didn&#8217;t succeed either. It seems that the ports version of subversion depends on apr-1.2.2, but all the mirror sites only have apr versions 1.2.6 and 1.2.7. I probably could&#8217;ve hacked it to use one of them, but then I figured the ports version would be kind of old anyway, since subversion was just updated to version 1.4. Thus, I decided to build it from scratch.</p>
<p>The problem with installing subversion from scratch is that it depends on a few other packages (included in the subversion-deps package) that need to be built as well, separately. So I hacked together a shell script that downloads the current subversion and subversion-deps packages and compiles and installs them:</p>
<p><a href="http://jlaine.net/assets/2006/11/1/subversion-1.4-install-all.sh">subversion-1.4-install-all.sh</a><br />
Usage:</p>
<filter:code>
<p>sudo sh subversion-1.4-install-all.sh</p>
</filter:code>
<p>(use sudo here to avoid writing your password multiple times during the course of the script)</p>
<p><strong>Disclaimer</strong> The script worked fine on both my <span class="caps">MBP</span> and a G4 PowerBook. It should probably work fine on any *nix, but use at your own risk. If it doesn&#8217;t work, I will only return the price of the script.</p></div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/9/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/7/">Newer &rarr;</a>
    
  </div>
</div>

    </div>
  </div>
  <footer role="contentinfo"><ul>
  <li><a href="http://jlaine.net/jarkko">About Jarkko</a></li>
  <li><a href="http://notkea.fi"><strong>NOTKEA.FI</strong> – Notkeita ajatuksia taloudesta, teknologiasta ja elämästä suomeksi</a></li>
</ul>

<p>
  Copyright &copy; 2015 - Jarkko Laine -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'https://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '50b05efb613f5d7127000040');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>

</body>
</html>
