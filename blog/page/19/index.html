
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <script type="text/javascript" src="//use.typekit.net/wpe2bbi.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  <meta charset="utf-8">
  <title>jlaine.net</title>
  <meta name="author" content="Jarkko Laine">

  
  <meta name="description" content="Undocumented in quotes because they&#8217;re really not undocumented, I just didn&#8217;t know about them before. Automatic handling of creation time &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jlaine.net/blog/page/19/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/feed/atom.xml" rel="alternate" title="jlaine.net" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link rel="author" href="https://plus.google.com/117033765270760829494/">
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-84654-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">jlaine.net</a></h1>
  
</hgroup>

</header>
  <!--<nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/feed/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jlaine.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>-->
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2005/02/23/undocumented-rails-finesses-part-i/">&#8220;Undocumented&#8221; Rails Finesses, Part I</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-02-23T00:00:00+02:00" pubdate data-updated="true">Feb 23<span>rd</span>, 2005</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Undocumented in quotes because they&#8217;re really not undocumented, I just didn&#8217;t know about them before.</p>
<ol>
	<li><strong>Automatic handling of creation time and modification time in ActiveRecord.</strong> Just put two timestamp fields in your database, <code>created_at</code> and <code>updated_at</code>, and you&#8217;re done. The fields will be automatically used by ActiveRecord whenever a new object is saved for the first time or updated. You don&#8217;t have to worry about them anymore.</li>
	<li><strong>Optimistic locking.</strong> Just read about this one in the mailing list. Add a field called <code>lock_version</code> (integer) into your table and ActiveRecord will use optimistic locking for that table from now on, as long as you put a hidden field with that version to your edit form.<br />
What does it mean? When you start editing an object, its <code>lock_version</code> is read from the database. As you submit your changes, your <code>lock_version</code> is compared to the current one in the database and if the db version has been bumbed up, your submittal is not accepted and an exception is raised. You (as an application developer) can then inform the user (hey, that was you, too!) about the situation and show her the latest version . Preferably show her her changes, too, otherwise she has to write the whole story again. You don&#8217;t want that, do you?<br />
</li></ol></li>
</ol>
<p>Rails is full of this kind of candies, so it&#8217;s worth exploring the <a href="http://rails.rubyonrails.com"><span class="caps">API</span> documentation</a>. It&#8217;s still a fairly moving target so I try to keep popping these &#8216;rubies&#8217; up to the surface as I discover them.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2005/02/22/understanding-mvc/">Understanding MVC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-02-22T00:00:00+02:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2005</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Amy Hoy of <a href="http://www.slash7.com/flashback/2005/01/oreilly_onlamp.html#more"><em>OnLAMP Tutorial for Designers&#8217; Brains</em></a> fame has written a great <a href="http://www.slash7.com/flashback/2005/02/mvc_the_most_ve.html">writeup</a> on <acronym title="Model-View-Controller"><span class="caps">MVC</span></acronym> pattern and how it relates to <a href="http://rubyonrails.com">Rails</a>. So, if you&#8217;ve always wondered what the heck it means that Rails is a full-stack framework, go read it. Now.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2005/02/11/mpaa-in-action/">MPAA in Action</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-02-11T00:00:00+02:00" pubdate data-updated="true">Feb 11<span>th</span>, 2005</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Boing Boing <a href="http://www.boingboing.net/2005/02/10/mpaa_shuts_down_loki.html">reports</a> that <span class="caps">MPAA</span> has been shutting down and <em>taking over</em> several BitTorrent hubs.</p>
<blockquote>
<p>Reader Brad Clarke says, &#8220;Taking down a site is one thing but putting up their own content has <span class="caps">GOT</span> to be illegal. He&#8217;s to hoping they finally went too far.&#8221;</p>
</blockquote>
<p>This reminds me of the Monday night when I went to watch <a href="http://teamamerica.com/">Team America</a> in the local cinema. Among the pre-movie commercials there was an &#8220;infomercial&#8221; from <span class="caps">MPAA</span>. The shoot showed several &#8220;normal-life&#8221; crimes like burglary and then ended with huge letters stating that &#8220;<strong><span class="caps">DOWNLOADING</span> IS A <span class="caps">CRIME</span></strong>&#8221;.</p>
<p>The problem? It&#8217;s not. Distributing copyrighted material (other than fair use) is a crime in Finland, downloading is <strong>not</strong>. That seems to be a fact conveniently &#8220;forgotten&#8221; by <span class="caps">MPAA</span> (and <span class="caps">RIAA</span>, <span class="caps">BSA</span>, you name it&#8230;) in <em>every possible occasion</em>. Anyone smell double standards here?</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2005/02/08/new-firefox-safari-exploit/">New Firefox/Safari Exploit</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-02-08T00:00:00+02:00" pubdate data-updated="true">Feb 8<span>th</span>, 2005</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Both <a href="http://www.boingboing.net/2005/02/06/shmoo_group_exploit_.html">BoingBoing</a> and <a href="http://www.theregister.co.uk/2005/02/07/browsers_idn_spoofing/">The Register</a> report about a security exploit affecting most modern browsers. The vulnerability makes it possible to create links that look ok in the browser (like www.paypal.com) but that actually lead to another site that has non-7-bit-ascii characters in their address. <a href="http://secunia.com">Secunia</a> has prepared a <a href="http://secunia.com/multiple_browsers_idn_spoofing_test/">test</a> you can run to see if your browser is vulnerable to the exploit.</p>
<p>In the BoingBoing story, they tell about a way to secure Firefox by changing a config parameter. However, in a later update they say that the fix doesn&#8217;t stand restarting the browser. Another update <a href="http://users.tns.net/~skingery/weblog/2005/02/permanent-fix-for-shmoo-group-exploit.html">tells</a> how to make the fix permanent. The fix is for Windows users, so here&#8217;s a rewrite of it for all Mac Firefox people:</p>
<ol>
	<li>Exit Firefox</li>
	<li>Open ~/Library/Application Support/Firefox/Profiles/ ###.default (or default.###) in finder (### being a number of random characters)</li>
	<li>Backup compreg.dat</li>
	<li>Open compreg.dat in a text editor (right-click =&gt; open with&#8230; =&gt; other =&gt; select textedit or some other text editor)</li>
	<li>Scroll down to [<span class="caps">CONTRACTIDS</span>] section and find this row: @mozilla.org/network/idn-service;1,{62b778a6-bce3-456b-8c31-2865fbb68c91}</li>
	<li>change the 1 after idn-service; to 0, so that the line will be @mozilla.org/network/idn-service;0,{62b778a6-bce3-456b-8c31-2865fbb68c91}</li>
	<li>Save the file and restart Firefox. Navigate to <a href="http://secunia.com/multiple_browsers_idn_spoofing_test/">Secunia&#8217;s test</a> and run the test. If you get a &#8220;not found&#8221; error, you should be all fine.</li>
</ol>
<p>I&#8217;ve tested the fix and it works fine for me, but I can&#8217;t promise it will for you. So stay tuned for security updates. And don&#8217;t forget Safari is vulnerable to this exploit, too, as is Opera.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2005/02/07/save-us-from-all-this/">Save Us From All This</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-02-07T00:00:00+02:00" pubdate data-updated="true">Feb 7<span>th</span>, 2005</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Cory Doctorow <a href="http://www.boingboing.net/2005/02/07/japanese_software_pa.html">points</a> to a <a href="http://yro.slashdot.org/article.pl?sid=05/02/06/2110204&amp;from=rss">Slashdot post</a>:</p>
<blockquote>
<p>The Tokyo District Court has ordered the destruction of Ichitaro, a software product that is the only serious competitor in Japan to Microsoft Word, and has been on sale since 1985. The ruling is based on the claim of a competitor, Matsushita, that the use of a help icon to invoke a help function infinges on one of their patents. &#8216;We are a global enterprise and we are just following international practice to enforce our IP rights,&#8217; Kitadeya (Matsushita) said.&quot;</p>
</blockquote>
<p>Please, <del>God</del> EU parliament, don&#8217;t let us sink to this level of absurdity.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2005/02/02/desktop-manager-sacked-for-virtue/">Desktop Manager Sacked for Virtue</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-02-02T00:00:00+02:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2005</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve been an avid user of <a href="http://wsmanager.sourceforge.net/">Desktop Manager</a> ever since I learned about it. I&#8217;ve been a bit frustrated with some of its shortcomings, tho. The most annoying thing is that I have often a hard time finding a given window from the four desktops.</p>
<h3>A new kid in town</h3>
<p><a href="http://virtuedesktops.sourceforge.net/">Virtue</a> is built on the shoulders of Desktop Manager and tries to get around the biggest cons of its predecessor. With Virtue you can click on an application icon and you&#8217;ll be swapped into the right desktop automatically. That alone made me switch to using it. There should be a lot more in it, but I haven&#8217;t yet had time to dive into other details. All in all, Virtue is a great addition to the arsenal of any hard core OS X user.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2005/02/01/skype-1-0-for-mac-is-out/">Skype 1.0 for Mac Is Out</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-02-01T00:00:00+02:00" pubdate data-updated="true">Feb 1<span>st</span>, 2005</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Skype launched today <a href="http://www.skype.com/products/skype/macosx/">version 1.0 for OS X</a> (and <a href="http://www.skype.com/products/skype/linux/">Linux</a>) of its great internet phone application.</p>
<p>I&#8217;ve been using the beta version for a while and although it&#8217;s got a few glitches, it has saved me a lot of time and cell phone bills. I still wish the sound quality would be better. Even though they claim to beat normal phone in quality, even domestic connections between two broadband nodes have been flaky at times.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2005/02/01/dave-thomas-on-textdrive/">Dave Thomas on TextDrive</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-02-01T00:00:00+02:00" pubdate data-updated="true">Feb 1<span>st</span>, 2005</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://blogs.pragprog.com/cgi-bin/pragdave.cgi">PragDave</a> writes <a href="http://blogs.pragprog.com/cgi-bin/pragdave.cgi/Random/TwoISPs.rdoc">about TextDrive customer service</a>:</p>
<blockquote>
<p>Not only did Jason Hoffman sort out all my problems, but he extrapoloted what I was trying to do in the long term, and preemptively offered to set it all up for me.</p>
</blockquote>
<p>Yes, <a href="http://www.textdrive.com">TextDrive</a> service is <em>that</em> good. I wouldn&#8217;t consider anything else for me or my customers.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2005/01/28/mapquestioning/">MapQuestioning</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-01-28T00:00:00+02:00" pubdate data-updated="true">Jan 28<span>th</span>, 2005</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Dave Winer <a href="http://archive.scripting.com/2005/01/27#When:8:52:35AM">reports</a> about a News.com <a href="http://news.com.com/MapPoint+users+in+for+long+and+winding+road/2100-1012_3-5552305.html?tag=nl">article</a> which describes how Norwegians wanting to go from Haugesund to Trondheim are <a href="http://mappoint.msn.com/(mrhnz1ixqxpjzei3tudrwinr)/directions.aspx?&amp;StartName=Haugesund%2c+Rogaland%2c+Norway&amp;StartLocation=59.40634%2c5.28529&amp;EndName=Trondheim%2c+SÃ¸r-TrÃ¸ndelag%2c+Norway&amp;EndLocation=63.43092%2c10.39206&amp;DataSetLangID=EUR%2c409&amp;RouteType=Quickest&amp;RouteUnit=Miles">routed</a> through England, Belgium, Germany, Denmark and Sweden. Well, according to MapQuest you wouldn&#8217;t want to live in Finland, either, because we <strong>have no friggin&#8217; roads!</strong></p>
<p>!/images/28.gif (MapQuest Route from Turku to Vaasa)!:http://mappoint.msn.com/(mrhnz1ixqxpjzei3tudrwinr)/directions.aspx?&amp;EndName=Vaasa%2c+LÃ¤nsi%2c+Finland&amp;EndLocation=63.09568%2c21.61061&amp;StartName=Turku%2c+LÃ¤nsi%2c+Finland&amp;StartLocation=60.45269%2c22.25119&amp;DataSetLangID=<span class="caps">EUR</span>,409&amp;RouteType=Quickest&amp;RouteUnit=Miles</p>
<p>And you still wondered, why <em>msn.fi is the most popular net site in Finland</em> (you didn&#8217;t think it&#8217;s got something to do with the fact that it&#8217;s the default start page for Finnish Internet Explorer, did you?)&#8230;</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2005/01/20/more-rails-goodness/">More Rails Goodness</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-01-20T00:00:00+02:00" pubdate data-updated="true">Jan 20<span>th</span>, 2005</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Rails version 0.9.4.1 is out and ohmigod. The framework is going forward so fast I have trouble following up with all the new stuff. Here&#8217;s the greatest of <a href="http://weblog.rubyonrails.com/archives/2005/01/17/rails-094-caching-filters-sqlite3/">the latest</a>: <a href="http://ap.rubyonrails.com/classes/ActionController/Caching.html">Caching</a>.</p>
<p>Well, yeah, caching is no news as such. It&#8217;s the way David implemented it (just like other things) in Rails that can&#8217;t stop astounding me. It&#8217;s so simple it almost makes me cry. Want to <a href="http://ap.rubyonrails.com/classes/ActionController/Caching/Pages.html">cache some whole pages</a> your controller is serving? Just do this:</p>
<pre><code>
  class WeblogController &lt; ActionController::Base
    caches_page :show, :new
  end
</code></pre>
<p>Phew, that was all good and well. But what if you have some personalized content? You can&#8217;t cache whole pages then, can you? That&#8217;s right, dear Watson. But you can cache the actions. Using <a href="http://ap.rubyonrails.com/classes/ActionController/Caching/Actions.html"><em>action caching</em></a> means that the request will go trough Action Pack so all the filters are processed before the page gets served. That way you can use authentication and other magic in your pages without having to give up the glory of caching. Here&#8217;s an example of controller that uses both page <em>and</em> action caching, stolen straight from the api docs:</p>
<pre><code>
  class ListsController &lt; ApplicationController
    before_filter :authenticate, :except =&gt; :public
    caches_page   :public
    caches_action :show, :feed
  end
</code></pre>
<p>This controller has a public action and two private actions that need authentication &#8212; and thus action-level caching.</p>
<p>The most granular way to do caching in Rails is <a href="http://ap.rubyonrails.com/classes/ActionController/Caching/Fragments.html"><em>fragment caching</em></a>. It&#8217;s what the two higher-level caching schemes use internally. Using fragment caching is a gem when you have pages that have both highly dynamic and pretty static parts. The downside is that it&#8217;s a bit more work and you have to do it in templates. Here&#8217;s an example of fragment caching:</p>
<pre><code>
  &lt;b&gt;Hello &lt;%= @name %&gt;&lt;/b&gt;
  &lt;% cache(binding) do %&gt;
    All the topics in the system:
    &lt;%= render_collection_of_partials "topic", Topic.find_all %&gt;
  &lt;% end %&gt;
</code></pre>
<p>There. But, wait! What if the content changes in between. Will the users be served old stinkin&#8217; cheese ever after. Glad you asked. It turns out David <em>did</em> notice this possibility. That&#8217;s why controllers now have methods like <code>expire_page</code>, <code>expire_action</code> and <code>expire_fragment</code>, for all you busy bees who can&#8217;t settle with the content you once created. Here&#8217;s an action where the cache for page <em>show</em> is flushed:</p>
<pre><code>
  class WeblogController &lt; ActionController::Base
    def update
      List.update(@params["list"]["id"], @params["list"])
      expire_page :action =&gt; "show", :id =&gt; @params["list"]["id"]
      redirect_to :action =&gt; "show", :id =&gt; @params["list"]["id"]
    end
  end
</code></pre>
<p>OK, enough rambling. Now, go create some apps swift as an arrow.</p>
<p>Oh, one more thing. Rails can use a bunch of different methods to store the cache. But that&#8217;s <a href="http://ap.rubyonrails.com/classes/ActionController/Caching/Fragments.html">another story</a>.</p></div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/20/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/18/">Newer &rarr;</a>
    
  </div>
</div>

    </div>
  </div>
  <footer role="contentinfo"><ul>
  <li><a href="http://jlaine.net/jarkko">About Jarkko</a></li>
  <li><a href="http://notkea.fi"><strong>NOTKEA.FI</strong> – Notkeita ajatuksia taloudesta, teknologiasta ja elämästä suomeksi</a></li>
</ul>

<p>
  Copyright &copy; 2013 - Jarkko Laine -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '50b05efb613f5d7127000040');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>

</body>
</html>
